<div class="loyalty-widget">
  <button class="button-exchange-point">Äá»•i Ä‘iá»ƒm ğŸ</button>

  <div class="loyalty-modal hidden">
    <div class="loyalty-content">
      <button class="close-modal" aria-label="Close">âœ–</button>

      {% if customer %}
        <div id="customer-id" data-id="{{ customer.id }}"></div>
        <div id="shop-info" data-shop="{{ shop.permanent_domain }}"></div>

        <h2>ğŸ ChÆ°Æ¡ng trÃ¬nh tÃ­ch Ä‘iá»ƒm</h2>
        <div class="tab-buttons">
          <button class="tab-button active" data-tab="redeem">Äá»•i Ä‘iá»ƒm</button>
          <button class="tab-button" data-tab="history">Lá»‹ch sá»­</button>
        </div>

        <div class="redeem-section">
          <ul class="redeem-rules">
            <li>Má»—i 100 Ä‘iá»ƒm tÆ°Æ¡ng á»©ng vá»›i 10.000Ä‘ giáº£m giÃ¡.</li>
            <li>Äiá»ƒm chá»‰ cÃ³ thá»ƒ Ä‘á»•i khi Ä‘áº¡t tá»‘i thiá»ƒu 100 Ä‘iá»ƒm.</li>
            <li>MÃ£ giáº£m giÃ¡ cÃ³ hiá»‡u lá»±c trong 30 ngÃ y ká»ƒ tá»« khi Ä‘á»•i.</li>
            <li>Má»—i khÃ¡ch hÃ ng chá»‰ Ä‘Æ°á»£c Ä‘á»•i tá»‘i Ä‘a 500 Ä‘iá»ƒm má»—i thÃ¡ng.</li>
          </ul>
          <p>
            Xin chÃ o <strong>{{ customer.first_name }}</strong>, báº¡n Ä‘ang cÃ³:
          </p>
          <p class="loyalty-points"><strong>...</strong> Ä‘iá»ƒm</p>

          <form method="POST" action="/apps/app/redeemPointProxy" class="redeem-form">
            <input type="hidden" name="customerShopifyId" value="{{ customer.id }}">
            <input type="hidden" id="shop-input" name="shop" value="{{ shop.permanent_domain }}">
            <label for="redeem-amount">Chá»n sá»‘ Ä‘iá»ƒm Ä‘á»ƒ Ä‘á»•i:</label>
            <select name="redeem-amount" id="redeem-amount" required>
              <option value="100">100 Ä‘iá»ƒm â†’ 10.000Ä‘</option>
              <option value="200">200 Ä‘iá»ƒm â†’ 20.000Ä‘</option>
              <option value="500">500 Ä‘iá»ƒm â†’ 50.000Ä‘</option>
            </select>
            <button type="submit" class="btn-redeem">
              Äá»•i Ä‘iá»ƒm láº¥y mÃ£
              <span class="spinner" style="display: none;"></span>
            </button>
          </form>

          <div class="redeem-success hidden">
            <p>ğŸ‰ CÃ¡c mÃ£ giáº£m giÃ¡ cá»§a báº¡n:</p>
            <div class="discount-codes" id="discount-codes"></div>
            <p class="redeem-note">HÃ£y dÃ¹ng mÃ£ nÃ y khi thanh toÃ¡n!</p>
          </div>
        </div>

        <div class="redeem-history hidden">
          <h3>Lá»‹ch sá»­ Ä‘á»•i Ä‘iá»ƒm</h3>
          <div class="history-container">
            <table class="history-table">
              <thead>
                <tr>
                  <th>NgÃ y háº¿t háº¡n</th>
                  <th>Äiá»ƒm Ä‘á»•i</th>
                  <th>MÃ£ coupon</th>
                  <th>Sá»‘ tiá»n giáº£m giÃ¡</th>
                  <th>Tráº¡ng thÃ¡i</th>
                </tr>
              </thead>
              <tbody id="history-list">
                <!-- Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c thÃªm báº±ng JavaScript -->
              </tbody>
            </table>
          </div>
          <p id="no-history" class="hidden">ChÆ°a cÃ³ giao dá»‹ch Ä‘á»•i Ä‘iá»ƒm nÃ o.</p>
        </div>
      {% else %}
        <p>ğŸ” Vui lÃ²ng <a href="/account/login">Ä‘Äƒng nháº­p</a> Ä‘á»ƒ xem vÃ  Ä‘á»•i Ä‘iá»ƒm.</p>
      {% endif %}
    </div>
  </div>
</div>

<!-- Táº£i thÆ° viá»‡n Toastify-js -->
<script src="https://cdn.jsdelivr.net/npm/toastify-js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js@1.12.0/src/toastify.min.css">

{% schema %}
{
  "name": "Exchange Point",
  "target": "body",
  "stylesheet": "exchange-point.css",
  "javascript": "pointInfo.js",
  "settings": []
}
{% endschema %}
